<!-- ShelterHub Dashboard Header -->
<div class="surface-primary-500 text-white p-4 md:p-6">
  <div class="max-w-7xl mx-auto">
    <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-4">
      <div class="flex-1">
        <ng-container *ngIf="isAuthenticated$ | async as authStatus">
          <ng-container *ngIf="authStatus.isAuthenticated && (currentUser$ | async) as user; else defaultTitle">
            <h1 class="text-4xl font-bold mb-2">Welcome to ShelterHub, {{ user.fullName.split(' ')[0] }}!</h1>
            <p class="text-lg opacity-90 line-height-3">
              Manage your shelter's pets, applications, and matching process from your admin dashboard.
            </p>
          </ng-container>
          <ng-template #defaultTitle>
            <h1 class="text-4xl font-bold mb-2">ShelterHub Admin Dashboard</h1>
            <p class="text-lg opacity-90 line-height-3">
              Your central hub for managing pets, applications, and adoptions.
            </p>
          </ng-template>
        </ng-container>
      </div>

      <div class="flex gap-3 flex-column md:flex-row">
        <p-button
          label="Add New Pet"
          icon="pi pi-plus"
          [raised]="true"
          severity="success"
          size="large"
          (onClick)="onAddPet()">
        </p-button>
        <p-button
          label="Run Matching"
          icon="pi pi-search"
          [raised]="true"
          severity="warn"
          size="large"
          (onClick)="onRunMatching()">
        </p-button>
      </div>
    </div>
  </div>
</div>

<!-- Dashboard Statistics -->
<section class="surface-ground py-4 md:py-6">
  <div class="max-w-7xl mx-auto px-3">
    <div class="grid">
      <div class="col-12 md:col-6 lg:col-4 xl:col-2">
        <p-card class="h-full">
          <div class="text-center">
            <i class="pi pi-heart text-5xl text-primary mb-3"></i>
            <div class="text-4xl font-bold text-primary mb-2">{{ dashboardStats.totalPets }}</div>
            <div class="text-lg text-color-secondary">Total Pets</div>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-4 xl:col-2">
        <p-card class="h-full border-left-4 border-green-500">
          <div class="text-center">
            <i class="pi pi-check-circle text-5xl text-green-500 mb-3"></i>
            <div class="text-4xl font-bold text-green-500 mb-2">{{ dashboardStats.availablePets }}</div>
            <div class="text-lg text-color-secondary">Available</div>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-4 xl:col-2">
        <p-card class="h-full border-left-4 border-orange-500">
          <div class="text-center">
            <i class="pi pi-clock text-5xl text-orange-500 mb-3"></i>
            <div class="text-4xl font-bold text-orange-500 mb-2">{{ dashboardStats.pendingAdoptions }}</div>
            <div class="text-lg text-color-secondary">Pending</div>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-4 xl:col-2">
        <p-card class="h-full border-left-4 border-blue-500">
          <div class="text-center">
            <i class="pi pi-file-edit text-5xl text-blue-500 mb-3"></i>
            <div class="text-4xl font-bold text-blue-500 mb-2">{{ dashboardStats.newApplications }}</div>
            <div class="text-lg text-color-secondary">New Applications</div>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-4 xl:col-2">
        <p-card class="h-full border-left-4 border-purple-500">
          <div class="text-center">
            <i class="pi pi-home text-5xl text-purple-500 mb-3"></i>
            <div class="text-4xl font-bold text-purple-500 mb-2">{{ dashboardStats.adoptedThisMonth }}</div>
            <div class="text-lg text-color-secondary">Adopted This Month</div>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</section>

<!-- Pet Management Section -->
<section class="py-6">
  <div class="max-w-7xl mx-auto px-3">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-primary mb-3">Shelter Pets</h2>
      <p class="text-lg text-color-secondary">Manage your pets and track their adoption status</p>
    </div>

    <div class="grid">
      <div class="col-12 md:col-6 lg:col-4" *ngFor="let pet of shelterPets">
        <p-card class="h-full">
          <ng-template pTemplate="header">
            <div class="relative">
              <img [src]="pet.image" [alt]="pet.name" class="w-full h-15rem object-cover" />
              <p-tag
                [value]="pet.status"
                [severity]="getStatusSeverity(pet.status)"
                class="absolute top-2 right-2">
              </p-tag>
            </div>
          </ng-template>

          <div class="flex justify-content-between align-items-start mb-3">
            <h3 class="text-xl font-bold text-primary m-0">{{ pet.name }}</h3>
            <p-badge
              [value]="pet.applications + ' applications'"
              severity="info"
              size="large">
            </p-badge>
          </div>

          <div class="mb-3">
            <p class="text-color-secondary mb-2 m-0">{{ pet.breed }} â€¢ {{ pet.age }} years old</p>
            <p class="text-color m-0 line-height-3">{{ pet.description }}</p>
          </div>

          <div class="flex justify-content-between align-items-center mb-3 text-sm">
            <span class="text-color-secondary">Added: {{ pet.dateAdded }}</span>
            <p-tag
              [value]="pet.medicalStatus"
              [severity]="pet.medicalStatus === 'Up to date' ? 'success' : 'danger'">
            </p-tag>
          </div>

          <ng-template pTemplate="footer">
            <div class="flex gap-2">
              <p-button
                label="View Details"
                icon="pi pi-eye"
                [outlined]="true"
                size="small"
                class="flex-1"
                (onClick)="onViewPet(pet.id)">
              </p-button>
              <p-button
                label="Manage"
                icon="pi pi-cog"
                severity="info"
                size="small"
                class="flex-1"
                (onClick)="onManagePet(pet.id)">
              </p-button>
            </div>
          </ng-template>
        </p-card>
      </div>
    </div>
  </div>
</section>

<!-- Recent Applications Section -->
<section class="surface-ground py-6">
  <div class="max-w-7xl mx-auto px-3">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-primary mb-3">Recent Applications</h2>
      <p class="text-lg text-color-secondary">Review and manage adoption applications</p>
    </div>

    <p-table
      [value]="recentApplications"
      styleClass="p-datatable-striped"
      [responsiveLayout]="'scroll'">

      <ng-template pTemplate="header">
        <tr>
          <th>Applicant</th>
          <th>Pet</th>
          <th>Date</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-application>
        <tr>
          <td>
            <div>
              <div class="font-bold text-primary">{{ application.applicantName }}</div>
              <div class="text-sm text-color-secondary">{{ application.contactInfo }}</div>
            </div>
          </td>
          <td>
            <span class="font-semibold">{{ application.petName }}</span>
          </td>
          <td>
            <span class="text-color-secondary">{{ application.submittedDate }}</span>
          </td>
          <td>
            <p-tag
              [value]="application.status"
              [severity]="getStatusSeverity(application.status)">
            </p-tag>
          </td>
          <td>
            <p-button
              label="Review"
              icon="pi pi-eye"
              size="small"
              [outlined]="true"
              (onClick)="onViewApplication(application.id)">
            </p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <div class="text-center mt-4">
      <p-button
        label="View All Applications"
        icon="pi pi-list"
        [outlined]="true"
        severity="info">
      </p-button>
    </div>
  </div>
</section>

<!-- Quick Actions Section -->
<section class="py-6">
  <div class="max-w-7xl mx-auto px-3">
    <h2 class="text-3xl font-bold text-primary text-center mb-6">Quick Actions</h2>

    <div class="grid">
      <div class="col-12 md:col-6 lg:col-3">
        <p-card
          class="h-full cursor-pointer hover:shadow-lg transition-all transition-duration-300"
          (click)="onAddPet()"
          tabindex="0"
          role="button"
          aria-label="Add new pet"
          (keyup.enter)="onAddPet()"
          (keyup.space)="onAddPet()">

          <div class="text-center">
            <i class="pi pi-plus-circle text-6xl text-green-500 mb-4"></i>
            <h3 class="text-xl font-bold text-primary mb-3">Add New Pet</h3>
            <p class="text-color-secondary line-height-3">Register a new pet in the system</p>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-3">
        <p-card
          class="h-full cursor-pointer hover:shadow-lg transition-all transition-duration-300"
          (click)="onRunMatching()"
          tabindex="0"
          role="button"
          aria-label="Run matching algorithm"
          (keyup.enter)="onRunMatching()"
          (keyup.space)="onRunMatching()">

          <div class="text-center">
            <i class="pi pi-search text-6xl text-orange-500 mb-4"></i>
            <h3 class="text-xl font-bold text-primary mb-3">Run Matching</h3>
            <p class="text-color-secondary line-height-3">Find potential matches for available pets</p>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full cursor-pointer hover:shadow-lg transition-all transition-duration-300">
          <div class="text-center">
            <i class="pi pi-chart-bar text-6xl text-blue-500 mb-4"></i>
            <h3 class="text-xl font-bold text-primary mb-3">View Reports</h3>
            <p class="text-color-secondary line-height-3">Access adoption and shelter statistics</p>
          </div>
        </p-card>
      </div>

      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full cursor-pointer hover:shadow-lg transition-all transition-duration-300">
          <div class="text-center">
            <i class="pi pi-cog text-6xl text-purple-500 mb-4"></i>
            <h3 class="text-xl font-bold text-primary mb-3">Settings</h3>
            <p class="text-color-secondary line-height-3">Configure shelter and system settings</p>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</section>
