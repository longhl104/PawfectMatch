<div class="login-container">
  <div class="login-header">
    <p-button
      icon="pi pi-arrow-left"
      label="Back to Choice"
      [text]="true"
      (onClick)="goBack()"
      styleClass="back-btn"
    >
    </p-button>

    <h1>Welcome Back</h1>
    <p>Sign in to your PawfectMatch account</p>
  </div>

  <p-card styleClass="login-card">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Email -->
      <div class="form-group">
        <p-floatlabel>
          <input
            pInputText
            id="email"
            type="email"
            formControlName="email"
            autocomplete="email"
            [class.ng-invalid]="isFieldInvalid('email')"
          />
          <label for="email">Email Address *</label>
        </p-floatlabel>
        @if (isFieldInvalid("email")) {
          <small class="p-error">
            @if (loginForm.get("email")?.errors?.["required"]) {
              Email is required
            }
            @if (loginForm.get("email")?.errors?.["email"]) {
              Please enter a valid email address
            }
          </small>
        }
      </div>

      <!-- Password -->
      <div class="form-group">
        <p-floatlabel>
          <p-password
            id="password"
            formControlName="password"
            [toggleMask]="true"
            [feedback]="false"
            autocomplete="current-password"
            [class.ng-invalid]="isFieldInvalid('password')"
            styleClass="w-full"
          >
          </p-password>
          <label for="password">Password *</label>
        </p-floatlabel>
        @if (isFieldInvalid("password")) {
          <small class="p-error">
            @if (loginForm.get("password")?.errors?.["required"]) {
              Password is required
            }
          </small>
        }
      </div>

      <!-- Forgot Password -->
      <div class="form-row">
        <div class="forgot-password">
          <a href="/auth/forgot-password">Forgot password?</a>
        </div>
      </div>

      <!-- Sign In Button -->
      <p-button
        type="submit"
        label="Sign In"
        [loading]="isSubmitting"
        loadingIcon="pi pi-spinner pi-spin"
        [disabled]="loginForm.invalid || isSubmitting"
        styleClass="w-full submit-btn"
      >
      </p-button>

      <!-- Register Link -->
      <div class="register-link">
        <p>
          Don't have an account?
          <a routerLink="/auth/choice">Create one here</a>
        </p>
      </div>

      <!-- Help Section -->
      <div class="help-section">
        <h3>Need help?</h3>
        <ul>
          <li>Check that your email address is spelled correctly</li>
          <li>Try resetting your password if you can't remember it</li>
        </ul>
      </div>
    </form>
  </p-card>

  <!-- Photo Credit -->
  <div class="photo-credit">
    Photo by
    <a
      href="https://www.pexels.com/@lum3n-44775/"
      target="_blank"
      rel="noopener"
      >Lum3n</a
    >
  </div>
</div>
